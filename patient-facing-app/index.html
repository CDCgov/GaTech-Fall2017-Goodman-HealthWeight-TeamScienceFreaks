<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Patient Questionnaire</title>
  <meta name="description" content="Free Bootstrap Theme by BootstrapMade.com">
  

  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans|Raleway|Candal">
  <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/theme.css">
  
  <link rel="stylesheet" type="text/css" href="css/ct-paper.css">
  
  <!-- -->
  <script src="js/demo-settings.js"></script>
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.easing.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/custom.js"></script>
  <script type="text/javascript" src="js/jquery.dform-1.1.0.min.js"></script>

  <!-- =======================================================
    Theme Name: Medilab
    Theme URL: https://bootstrapmade.com/medilab-free-medical-bootstrap-theme/
    Author: BootstrapMade.com
    Author URL: https://bootstrapmade.com
  ======================================================= -->
  
<!--  <style>
#qn_list{
	padding:1em
}
li {
	padding: .5em
}
  </style>
  -->
</head>

<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="60">
  <!--banner-->
  <section id="banner" class="banner">
    <div class="bg-color">
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="col-md-12">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
				        <span class="icon-bar"></span>
				        <span class="icon-bar"></span>
				        <span class="icon-bar"></span>
				      </button>
              <a class="navbar-brand" href="#">GT Healthy Weight</a>
            </div>
            <div class="collapse navbar-collapse navbar-right" id="myNavbar">
              <ul class="nav navbar-nav">
                <li class="active"><a href="#banner">Home</a></li>
                <li class=""><a href="#questionnaire">Questionnaire</a></li>
                <li class=""><a href="#recommendations">Recommendations</a></li>
                <!--<li class=""><a href="#testimonial">Testimonial</a></li>-->
                <!--<li class=""><a href="#contact">Contact</a></li>-->
              </ul>
            </div>
          </div>
        </div>
      </nav>
      <div class="container">
        <div class="row">

          <div class="banner-info">
            <!--
            <div class="banner-logo text-center">
              <img src="img/logo.png" class="img-responsive">
            </div>
            -->
            <div class="banner-text text-center">
              <h1 class="white">Maintain your Healthy weight</h1>
              <p>Work with your health care provider to help your child maintain a healthy weight.</p>
              <p>
                In the production version of the application, the first steps are authentication and searching for the patient. For demo purposes, we
                have used an option to select the patient. The backend call is the same as a search query of the patient to the FHIR server.

                <br/>After selecting a patient, please answer the health habits questionnaire, click submit and proceed to the recommendations.

              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!--questionaire-->
  <section id="select-child" class="section-padding">
    <div class="container">
      <div class="row">
        <div class="col-md-12 col-sm-12">

          <h2 class="ser-title">Select a child</h2>
          <hr class="botm-line">
          <p>
            <form id="myform">
              Select one of these patients: <select id="patientId" onchange="onChangePatient(this)">
                                                <option value="Choose...">Choose....</option>
                                                <option value="GT-HW-2019276">Clark Kent</option>
                                                <option value="GT-HW-2019280">Kara Kent</option>
                                            </select>
             
             
            </form>
          </p>
          <a href="#questionnaire" class="btn btn-appoint">Take the Questionnaire.</a>
        </div>
  
      </div>
    </div>
  </section>
  <!--/ questionaire-->
  <!--questionaire-->
  <section id="questionnaire" class="section-padding">
    <div class="container">
      <div class="row">
        <div class="col-md-12 col-sm-12">

          <h2 class="ser-title">Questionnaire</h2>
          <hr class="botm-line">
          <p/>
          <form id="qn_form">
          <div class="row"><strong>Patient:</strong> <span id="patient_name">...</span></div>
          <!--
          <div class="row"><strong>Patient ID:</strong> <span >...</span></div>
          -->
          <div class="row"><strong>Gender:</strong> <span id="patient_gender"></span></div>
          <div class="row"><strong>Address:</strong> <span id="patient_address"></span></div>
          <div class="row"><strong>Questions:</strong></div>
          <div class="row"><ul id="med_list"></ul></div>
          <input type="hidden" name="patient_id" id="patient_id" value="-999"/>
          <input type="hidden" name="qnr_id" id="qnr_id" value="-999" />
          <input type="hidden" name="qn_ct" id="qn_ct" value="-999" />

              
              <div class="row"><ul id="qn_list"></ul></div>
              
              <button type="submit" class="btn btn-primary" onclick="subOnClick(); return false;">Submit Questionnaire Response</button>
          
            </form>
            <br/>
            <!--
            <div class="row"><strong>Status:</strong> <span id="req_status"></span></div>
          -->
          </p>
          <a href="#recommendations" class="btn btn-appoint">Provide Recommendations</a>
        </div>
      </div>
    </div>
  </section>
  <script src="https://cdn.rawgit.com/smart-on-fhir/client-js/v0.1.8/dist/fhir-client.js"></script>
  <script src="js/get-data.js"></script>

  <!--/ questionaire-->
  <!--recommendations-->
    <section id="recommendations" class="section-padding">
      <div class="container">
        <div class="row">
          <div class="col-md-12 col-sm-12">  
            <h2 class="ser-title">Recommendations</h2>
            <hr class="botm-line">
                       <div  id="recommendation" style="margin-top: 15px;margin-bottom:15px" >                                                                            
                             <div style="font-size: 18px; color: #4F5F6B;">                                                     
                                 Send                                                                                           
                                 <select id="messageMethod">                                                                    
                                     <option>email</option>                                                                     
                                     <option>text</option>                                                                      
                                 </select> message recommending                                                                 
                                 <select id="messageType">                                                                      
                                     <option>farmers markets</option>                                                           
                                     <option>parks</option>                                                                     
                                 </select> for zip code                                                                         
                                 <input type="text" id="zipCode" placeholder="Zip Code" /> to                                   
                                 <input type="text" id="messageDestination" placeholder="Email Address" />.                     
                                 <button id="sendMessageButton" class="btn btn-primary">Send Recommendation &raquo;</button>                           
                             </div>                                                                                             
                         </div>                                                                                                 
                     </div>   
          </div>  
        </div>
      </div>
    </section>
    <!--/ recommendations-->

  <!--footer-->
  <footer id="footer">
    <div class="footer-line">
      <div class="container">
        <div class="row">
          <div class="col-md-12 text-center">
            Â© Copyright Medilab Theme. All Rights Reserved
            <div class="credits">
              <!--
                All the links in the footer should remain intact.
                You can delete the links only if you purchased the pro version.
                Licensing information: https://bootstrapmade.com/license/
                Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/buy/?theme=Medilab
              -->
              Designed by <a href="https://bootstrapmade.com/">BootstrapMade.com</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <!--/ footer-->

<!--  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.easing.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/custom.js"></script>
  <script type="text/javascript" src="js/jquery.dform-1.1.0.min.js"></script>

  <script type="text/javascript">
	$(function() {

    })

</script>
-->
  
  <script type="text/javascript" >
      const recommendation_host = "https://fhirtesting.hdap.gatech.edu/HealthWeightRecommendation/";
  $('[class^="ui-dform-"]').addClass('col-md-4 col-sm-4');
  $("#sendMessageButton").on('click', function () {
            var messageLink = $("#messagePreview");
            messageLink.attr("href", null);
            var method = $("#messageMethod").find(":selected").index() == 0 ? "Email" : "Sms";
            var type = $("#messageType").find(":selected").index() == 0 ? "fm" : "pk";
            var zipCode = $("#zipCode").val();
            var destination = $("#messageDestination").val();
            var data = {
                recommendationType: type,
                destination: destination,
                zipCode: zipCode,
                testMessage: true
            }
            $.post("http://" + recommendation_host + "/send" + method, data);
        });

    
  </script>

</body>

</html>
